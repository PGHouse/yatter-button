<!doctype html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Yatter-Button</title>
        <style>
        body {
            background : #DFFFDF;
            min-width  : 150px;
            overflow-x : hidden;
            text-align : center;
        }
        #yatter {
            background    : #008800;
            color         : #ffff00;
            font-size     : 20px;
            font-weight   : bold;
            border-radius : 20px;
        }
        </style>
    </head>
    <body>
        <div id="yatter"></div>
        <div class="input-form">
            <input name="data[Yatter][comment]" class="inputbox" value="" type="text" id="YatterComment"/>
            <input type="button" value="送信" id="sendButton">
        </div>
        <script>
            document.getElementById("sendButton").addEventListener('click', function() {
                document.all("YatterComment").style.display = "none";
                document.all("sendButton").style.display    = "none";
                var comment = document.all("YatterComment").value;

                var connection = chrome.extension.connect();
                connection.onMessage.addListener(function(info, con){
                    document.getElementById("yatter").innerText = '1 Yatter!!';
                });
                connection.postMessage('comment=' + comment);
            });
        </script>
    </body>
</html>
